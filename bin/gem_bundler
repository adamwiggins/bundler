#!/usr/bin/env ruby
require "optparse"
require "bundler"

options = {}

parser = OptionParser.new do |op|
  op.banner = "Usage: gem_bundler [OPTIONS] [PATH]"

  op.on("-m", "--manifest MANIFEST") do |manifest|
    options[:manifest] = manifest
  end

  op.on_tail("-h", "--help", "Show this message") do
    puts op
    exit
  end
end
parser.parse!

options[:path] = ARGV.shift || File.join(Dir.pwd, "vendor", "gems")

options[:manifest] ||= "Gemfile"

unless File.exist?(options[:manifest])
  puts parser
  puts %(
    MANIFEST (#{options[:manifest]}) must exist
  )
  exit
end

Bundler.run(options)